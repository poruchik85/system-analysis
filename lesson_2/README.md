### 1. Домен, поддомены
Цель системы - борьба с выгоранием котов путём избавления от необходимости выполнения важных кошачьих функций, выполняя эти функции за них специально обученными котами.

#### Поддомены
- матчинг - core
- найм воркеров - core
- оказание услуги, выплаты - supporting
- контроль качества - supporting
- закупка, хранение, предоставление расходников - generic
- сервис нотификаций - generic

Core domain chart  
[pdf](core%20domain%20chart.pdf)  
[diagrams.net](https://drive.google.com/file/d/1wKUh5COgWWnETSZcOTcxHxnell1ydFfv/view?usp=sharing)  


Самые важные элементы системы - это матчинг (секретный алгоритм качественного подбора воркеров) и подбор воркеров (критерии отбора, скорее всего, тоже ноухау). Значит оба этих поддомена являются core.
Оказание услуги - центральный процесс ведения бизнеса, однако он представляет из себя типовой флоу заказа, так что попадает в supporting (реализовываться он будет скорее всего своими силами, чтобы оперативно реагировать на специфичные требования бизнеса). То же касается и контроля качества.

Наконец, склад и сервис нотификаций - наименее важные системы для бизнеса, их можно вынести на аутсорс (как разработку, или даже вообще как услугу) - это generic domain. Сервис нотификаций, скорее всего, вообще будет внешним подписочным сервисом - в ES он даже не попал.
Выплаты воркерам и оплату услуг я изначально вынес в отдельные домены, однако они сильно связаны данными с оказанием услуги, поэтому я включил их в домен услуг.
Также без внимания осталась система ставок пользователей - из-за своей простоты, неважности и предполагаемой неизменности, это будет просто модуль в составе сервиса, обеспечивающего оказание услуг (лучше всего отнести это туда ради близости к необходимым данным).

### 2. Боундед-контексты
[pdf](bounded%20contextes.pdf)  
[diagrams.net](https://drive.google.com/file/d/1-oqPF9hIByc7REBYmzZVGdJHb2zSUhh3/view?usp=sharing)  

По сравнению с первой домашкой, на мороз оказались выкинуты контексты со ставками и нотификациями - в силу своей неважности и простоты.
Контекст с биллингом разделился на два - выплаты воркерам и приём оплат от клиентов - так их можно безопасно модифицировать независимо, однако они попали в один поддомен с оказанием услуги из-за высокой связности по данным.

ES-модель  
[pdf](es.pdf)  
[diagrams.net](https://drive.google.com/file/d/18u-8U29kahBzLgZgqh5dsxAGQZaNYGrq/view?usp=sharing)

Модель данных  
[pdf](Data%20model.pdf)  
[diagrams.net](https://drive.google.com/file/d/1x1sR3apzeR2DrcCQzTQx6Buv-OEem_6W/view?usp=sharing)

### 3. Характеристики

**Scalability** - "компания планирует расширяться в будущем";

**Agility**, **Evolvability** - "компания планирует расширяться в будущем", "Благодаря отсеву и матчингу компания планирует выделяться на фоне конкурентов";

**Agility**, **Modifiability** - "Благодаря отсеву и матчингу компания планирует выделяться на фоне конкурентов", "Для бизнеса критично проверять новые гипотезы по отсеву котов и изменять уже существующие с максимальной скоростью и надёжностью";

**Elasticity**, **Scalability**, **Security** - [US-081] - "Мы ожидаем 1 к заявок в день от рандомных котов, также, судя по отзывам, наши конкуренты могут попытаться нас заддосить в этом месте", "Общая нагрузка на систему не будет превышать 10 заказов в день и 100 клиентов. Воркеров будет 20 человек.";

**Agility**, **Testability**, **Deployability** - "Бизнесу необходим низкий ТТМ";

**Performance**, **Availability**, **Usability**, **Simplicity** - следует из природы цели бизнеса - уменьшение стресса клиентов;

**Agility**, **Modifiability**, **Testability**, **Deployability** - "реализовать проект с нуля".

Таким образом, можно резюмировать:
- поскольку система новая, реализуется с нуля, ей необходимы такие характеристики, как **Agility**, **Modifiability**, **Testability**, **Deployability**;
- для core domains нужны **Security** (для защиты ноухау), а также **Agility** и **Modifiability** для быстрой проверки гипотез и **Evolvability** для соответствия изменяющимся условиям;
- для сервисов оказания услуг и HR нужны **Elasticity**, **Scalability**, **Security**, т.к. эти сервисы являются гейтами во внешний мир, и с ростом компании должны скейлиться в первую очередь;
- **Performance**, **Availability**, **Usability**, **Simplicity** - эти характеристики нужны для всей системы в целом, чтобы клиенты не психовали и обращались за услугами снова и снова.

### 4. Архитектурный стиль
По большинству характеристик, приведённых в таблице урока, кроме **Performance**, **Simplicity** и цены, выигрывает система с микросервисами. Она однозначно будет уступать, например, по **Consistency** (в таблице не указано) всем архитектурам с общей базой, но эта характеристика нам и не требуется. А ремарка "Деньги на данный момент не критичны" окончательно определяет выбор - микросервисная архитектура.
Единственное - можно сделать сервисы домена оказания услуг в виде service-based, с общей базой. Это не повлияет на характеристики, зато может существенно упростить этот домен и сделать его дешевле.


### 5. Итоговая модель

[pdf](final%20model.pdf)  
[diagrams.net](https://drive.google.com/file/d/1oDNEwqMaIYu5zwSvqmYLTpR3PsLZZvpz/view?usp=sharing)

Все связи, за исключением выбора воркера, можно спокойно делать асинхронными. Матчинг же прямо влияет на восприятие работы системы клиентом, поэтому его нужно делать максимально быстрым и оптимизированным.
